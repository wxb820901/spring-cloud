AWS learning account: wxb820901awslearn@126.com

aws problems:
------------------------------------------------------------------------------------------------------------------------
how to access EC2?
==> click the "connect" button (if putty used, click "connect using PuTTY)") and follow detail step.
------------------------------------------------------------------------------------------------------------------------
if change client pc how to download private key?
==>create new key pair and auto down load *.pem.
------------------------------------------------------------------------------------------------------------------------
error "Unable to locate credentials" when aws s3 cp a.txt s3://demo-bucket-20190625-1/
==> aws configure list

      Name                    Value             Type    Location
      ----                    -----             ----    --------
   profile                <not set>             None    None
access_key     ****************      shared-credentials-file
secret_key     ****************      shared-credentials-file
    region                <not set>             None    None

check if the credentials" exist.

if not

cd ~
mkdir .aws
vi .aws/credentials"

and input like below

[default]
aws_access_key_id =
aws_secret_access_key =

------------------------------------------------------------------------------------------------------------------------
2, RDS unreachable
==> enable public access
------------------------------------------------------------------------------------------------------------------------
3, before create vpc, subnet and security group. understad CIDR firstly.
------------------------------------------------------------------------------------------------------------------------
4, use pgadmin connection AWS RDS, default value of "Maintenance database" and "Username" are all postgres
------------------------------------------------------------------------------------------------------------------------
create apigateway+lambda refer to https://gist.github.com/crypticmind/c75db15fd774fe8f53282c3ccbe3d7ad

aws lambda create-function \
--region us-east-1 \
--function-name api-test-handler \
--runtime java8 \
--handler com.aws.demo.HelloAPIGateway::handleRequest \
--memory-size 128 \
--zip-file fileb://~/.m2/repository/com/example/aws-lambda/0.0.1-SNAPSHOT/aws-lambda-0.0.1-SNAPSHOT.jar \
--role arn:aws:iam::123456:role/role-name \
--endpoint-url=http://localhost:4574

aws apigateway create-rest-api --region us-east-1 --name 'API-Test' --endpoint-url=http://localhost:4567

#aws apigateway get-rest-apis --endpoint-url=http://localhost:4567  --region us-east-1 #toget next step --rest-api-id
#aws apigateway get-resources --rest-api-id 863292701A-Z --endpoint-url=http://localhost:4567  --region us-east-1  #toget next step --parent-id

aws apigateway create-resource --rest-api-id 863292701A-Z --parent-id 5A-Z56988398 --path-part somethingId --endpoint-url=http://localhost:4567  --region us-east-1
#aws apigateway get-resources --rest-api-id 863292701A-Z --endpoint-url=http://localhost:4567  --region us-east-1 #to get nextstep r--esource-id
aws apigateway put-method \
--region us-east-1 \
--rest-api-id 863292701A-Z \
--resource-id A-Z757066136 \
--http-method GET \
--request-parameters "method.request.path.somethingId=true" \
--authorization-type "NONE" \
--endpoint-url=http://localhost:4567

aws apigateway put-integration \
 --region us-east-1 \
 --rest-api-id 863292701A-Z \
 --resource-id A-Z757066136 \
 --http-method GET \
 --type AWS_PROXY \
 --integration-http-method POST \
 --uri arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:000000000000:function:api-test-handler/invocations\
 --passthrough-behavior WHEN_NO_MATCH \
 --endpoint-url=http://localhost:4567

 aws apigateway create-deployment \
  --region us-east-1 \
  --rest-api-id 863292701A-Z \
  --stage-name test \
  --endpoint-url=http://localhost:4567

curl http://localhost:4567/restapis/863292701A-Z/test/_user_request_/HowMuchIsTheFish
http://localhost:4567/restapis/${API_ID}/${STAGE}/_user_request_/HowMuchIsTheFish
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------